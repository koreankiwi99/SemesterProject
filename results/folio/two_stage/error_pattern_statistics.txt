
# FOLIO Two-Stage Error Pattern Summary Statistics

## Error Distribution by Pattern

| Pattern | GT → Pred | Count | % of Errors | Key Problem |
|---------|-----------|-------|-------------|-------------|
| Pattern 1 | Unknown → True | 12 | 29.3% | Axiomatizing uncertain conclusions |
| Pattern 2 | True → Unknown | 10 | 24.4% | Failure to derive valid conclusions |
| Pattern 3 | False → Unknown | 10 | 24.4% | Failure to find contradictions |
| Pattern 4 | Unknown → False | 4 | 9.8% | Incorrect proofs of negation |
| Pattern 5 | False → True | 4 | 9.8% | Axiomatizing false conclusions |
| Pattern 6 | True → False | 2 | 4.9% | Wrong conclusions from valid premises |
| **Total** | - | **41** | **100%** | - |

## Error Type Breakdown

### Axiomatization Errors (Still Present)
- **Pattern 1**: 12 cases (100% of pattern) - Axiomatizes Unknown conclusions
- **Pattern 4**: 3 cases (75% of pattern) - Axiomatizes Unknown conclusions as False
- **Pattern 5**: 1 case (25% of pattern) - Axiomatizes False conclusion (Solo EV)
- **Pattern 6**: 1 case (50% of pattern) - Axiomatizes True conclusion (John's wedding)
- **Total**: 17 cases (41.5% of all errors)

### New Failure Modes (Two-Stage Specific)
- **Under-axiomatization** (Pattern 2): 3 cases - Missing domain closure
- **Logical direction errors** (Pattern 2): 1 case - P→Q instead of Q→P
- **Existential closure failure** (Pattern 2): 1 case - Doesn't assume existence
- **Complex constraint tracking** (Pattern 3): 3 cases - Can't trace multi-step implications
- **Incomplete disjunctive reasoning** (Pattern 3): 1 case - Needs all conjuncts known
- **Domain membership gaps** (Pattern 3): 1 case - Doesn't infer category membership
- **Importing unstated constraints** (Pattern 4): 1 case - Assumes mutual exclusivity
- **Reasoning from contradictions** (Pattern 5): 1 case - Derives from inconsistent premises
- **Vacuous truth issues** (Patterns 5-6): 3 cases - Ex falso quodlibet or misrepresentation
- **Total**: 15 cases (36.6% of all errors)

### Unclassified/Complex
- 9 cases (22.0%) - Combinations or unclear root causes

## Comparison: Two-Stage vs Simple Lean

| Error Type | Simple Lean | Two-Stage | Change |
|------------|-------------|-----------|--------|
| False → True | 21 cases | 4 cases | **-81% (17 fewer)** |
| Unknown → True | Not tracked | 12 cases | New error mode |
| Total errors | ~50+ cases | 41 cases | **~18% reduction** |

## Key Findings

### Two-Stage's Strengths
1. **81% reduction in False→True errors** (21 → 4)
   - Stage 2 verification catches most axiomatization-of-false-conclusions
   - Shows value of two-stage approach for contradictory statements

2. **Better handling of contradictions**
   - Simple Lean: Axiomatizes contradictions as true
   - Two-Stage: Either catches them (Stage 2) or marks Unknown

### Two-Stage's Weaknesses
1. **Still axiomatizes conclusions** (17/41 = 41.5%)
   - Mostly for Unknown conclusions (Pattern 1: 12 cases)
   - But also True (1), False (1), Unknown→False (3)
   - Stage 2 doesn't detect circular axiomatization

2. **New failure modes** (15/41 = 36.6%)
   - Under-axiomatization: Too conservative, misses implicit assumptions
   - Can't track complex multi-step constraints
   - Logical direction errors in FOL translation

3. **Gives up too easily** (20/41 = 48.8%)
   - True→Unknown: 10 cases where conclusion is actually provable
   - False→Unknown: 10 cases where contradiction exists but not found

## Root Cause Analysis

### Stage 1 Issues (Natural Language → FOL)
- **Translation errors**: Wrong logical direction (P→Q vs Q→P)
- **Under-specification**: Misses implicit domain closure, existence assumptions
- **Over-specification**: Adds unstated constraints (mutual exclusivity)

### Stage 2 Issues (FOL → Lean)
- **No circular axiom detection**: Doesn't check if conclusion appears in axioms
- **Limited constraint propagation**: Can't trace multi-step implications
- **Countermodel construction**: Exploits artificial gaps in axiomatization

### Answer Extraction Issues
- **Vacuous truth handling**: Misrepresents axiom vs theorem
- **Contradiction handling**: Derives conclusions from inconsistent premises

## Recommendations for Improvement

### High Priority (Address Axiomatization)
1. **Stage 1.5: Axiom Validator**
   - Check if conclusion text appears in axioms
   - Flag circular axiomatization before Stage 2
   - Would prevent 17/41 errors (41.5%)

2. **Domain Closure Reasoner**
   - Add transitive closure (if X is Y and Y is Z, add X is Z)
   - Infer category membership (bees → animals)
   - Would prevent ~5/41 errors (12.2%)

### Medium Priority (Better Reasoning)
3. **Constraint Propagation Engine**
   - Track multi-step implications
   - Detect contradictions earlier
   - Would prevent ~3/41 errors (7.3%)

4. **Existential Closure Heuristics**
   - When question asks "a X has property P", assume X exists
   - Add existence axioms based on context
   - Would prevent ~2/41 errors (4.9%)

### Low Priority (Edge Cases)
5. **Logical Direction Validator**
   - For "A do B" statements, check if axiom is A→B or B→A
   - Natural language ambiguity resolution
   - Would prevent ~1/41 error (2.4%)

6. **Vacuous Truth Handler**
   - Distinguish axiom vs theorem in answer extraction
   - Recognize ex falso quodlibet patterns
   - Would prevent ~3/41 errors (7.3%)

## Expected Impact

If all high+medium priority improvements implemented:
- Current accuracy: 79.8% (162/203 correct)
- Potential accuracy: **87.7%** (178/203 correct)
- Improvement: **+7.9 percentage points**

This would achieve state-of-the-art performance on FOLIO with formal verification!
