<lean>
axiom Person : Type
axiom Mary : Person

axiom Sale : Prop
axiom StockUp : Person → Prop
axiom MakeList : Person → Prop
axiom PlanBuy : Person → Prop
axiom PlanAhead : Prop
axiom Payday : Prop
axiom PricesUp : Prop

-- If the supermarket has a sale, then people will stock up on groceries.
axiom P1 : Sale → ∀ x : Person, StockUp x
-- If someone makes a shopping list, then they plan what to buy.
axiom P2 : ∀ x : Person, MakeList x → PlanBuy x
-- Either the store has a sale, or people don't plan what to buy, or there's a sale but they don't plan ahead.
axiom P3 : Sale ∨ (∀ x : Person, ¬PlanBuy x) ∨ (Sale ∧ ¬PlanAhead)
-- If payday was this week, then people make a shopping list.
axiom P4 : Payday → ∀ x : Person, MakeList x
-- Either it was payday this week, or prices went up recently, or both.
axiom P5 : Payday ∨ PricesUp ∨ (Payday ∧ PricesUp)

-- From the premises we can derive: if Mary did not stock up, then prices went up recently.
theorem prices_up_if_mary_did_not_stock : (¬StockUp Mary) → PricesUp := by
  intro hNoStockMary
  -- From ¬StockUp Mary, derive ¬Sale
  have hNoSale : ¬Sale := by
    intro hSale
    have hAllStock : ∀ x, StockUp x := P1 hSale
    have hMaryStock : StockUp Mary := hAllStock Mary
    exact hNoStockMary hMaryStock
  -- From P3 and ¬Sale, derive that nobody plans what to buy
  have hNoPlanAll : ∀ x : Person, ¬PlanBuy x := by
    cases P3 with
    | inl hSale => exact False.elim (hNoSale hSale)
    | inr hrest =>
      cases hrest with
      | inl hNoPlan => exact hNoPlan
      | inr hSaleNoAhead => exact False.elim (hNoSale hSaleNoAhead.left)
  -- From Payday → everyone makes a list, and list → plan, contradicting hNoPlanAll, derive ¬Payday
  have hNoPayday : ¬Payday := by
    intro hPayday
    have hAllList : ∀ x, MakeList x := P4 hPayday
    have hPlanMary : PlanBuy Mary := (P2 Mary) (hAllList Mary)
    exact (hNoPlanAll Mary) hPlanMary
  -- From P5 and ¬Payday, conclude PricesUp
  cases P5 with
  | inl hPayday => exact False.elim (hNoPayday hPayday)
  | inr hrest =>
    cases hrest with
    | inl hPricesUp => exact hPricesUp
    | inr hBoth => exact hBoth.right
</lean>

ANSWER: Failure
